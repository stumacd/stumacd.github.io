---
layout: post
title: Plant Monitor
date: '2009-09-23T07:04:00.000-07:00'
tags:
- arduino
- plant monitor
- code
modified_time: '2010-12-19T22:53:33.587-08:00'
thumbnail: http://2.bp.blogspot.com/_5u5mnYQAPyg/Srorosh7S-I/AAAAAAAAAAM/c2xcZPzdoTQ/s72-c/rx.JPG
blogger_id: tag:blogger.com,1999:blog-4711902727427506568.post-8988378044123363897
blogger_orig_url: http://toastedtoothpaste.blogspot.com/2009/09/plant-monitor.html
project: true
---

It took me a little while to get a few bugs sorted out. But I now have a working plant monitor.<br /><br /><a href="http://2.bp.blogspot.com/_5u5mnYQAPyg/Srorosh7S-I/AAAAAAAAAAM/c2xcZPzdoTQ/s1600-h/rx.JPG" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5384664282623069154" src="http://2.bp.blogspot.com/_5u5mnYQAPyg/Srorosh7S-I/AAAAAAAAAAM/c2xcZPzdoTQ/s320/rx.JPG" style="cursor: pointer; float: left; height: 238px; margin: 0pt 10px 10px 0pt; width: 320px;" /></a>The receiver sits by the computer. It's an arduino with a loosely wired shield. The RF <a href="http://www.sparkfun.com/commerce/product_info.php?products_id=8949">receiver</a>'s data line goes into the Arduino's RX. The rest are either unused or for power.<br /><br />One change I will make to version 2 (if I ever get round to a version 2) is to make a small packet get sent rather than the ID and then the reading. I would also be interested in sending the temperature. I'm unsure if the temperature effects the conductivity of the soil, but I guess I'll work that out in the coming weeks. Maybe I'd have to adjust the threshold dependant on the temperature.<br />Both .pde files needs the RFDriver.pde file from Morris's site (mentioned in the last post). It needs to be in the same directory and this only works with Arduino's IDE version 16 onwards.<br /><a href="http://www.blogger.com/goog_1411858840"><br /></a><br /><a href="http://www.mediafire.com/?ccxm2h9q57d5cd1"><span style="font-weight: bold;">PlantRcvr.pde</span></a><br /><a href="http://www.mediafire.com/?ciickkyjbi2hao5">PlantTrans.pde</a><br /><br />Note - don't program the tx with rx or vice versa. Rookie mistake.<br /><br /><eeprom.h><a href="http://4.bp.blogspot.com/_5u5mnYQAPyg/SrpYcMnPV8I/AAAAAAAAAAc/Awl4LCJhTlY/s1600-h/tx.JPG" onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}"><img alt="" border="0" id="BLOGGER_PHOTO_ID_5384713545920239554" src="http://4.bp.blogspot.com/_5u5mnYQAPyg/SrpYcMnPV8I/AAAAAAAAAAc/Awl4LCJhTlY/s320/tx.JPG" style="cursor: pointer; display: block; height: 320px; margin: 0px auto 10px; text-align: center; width: 214px;" /></a><br />Now the <a href="http://www.sparkfun.com/commerce/product_info.php?products_id=8946">transmitter</a> is a little simpler.The idea is that one transmitter can do a windowsill full of plants. Luckily the ATmega328 has 6 A/D channels, so we don't have to do anything tricky to monitor 6 plants.<span style="font-weight: bold;"><br /><br /></span>You could pull the AVR out of the arduino (carefully!) and attach the power rails and hook all of the lines up as per the pins on the arduino if you want to save yourself an arduino board. I'll be doing that as soon as I get my hands on a 16MHz crystal. Even after changing the clk fuse I can't seem to get a un-clocked chip to work.<br /><br />I'm sure there's bugs in the code and it's hardly optimised at all. Let me know if you use it, like it, hate it, or find bugs. If you optimise or add functionality let me know, I'm interested to see what this could become.</eeprom.h>
